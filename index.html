<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Weather App</title>
  <style>
    :root{ --bg:#0f1724; --card:#0b1220; --accent:#0ea5a4; --muted:#94a3b8; --glass: rgba(255,255,255,0.03);} 
    *{box-sizing:border-box}
    body{margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial; background: linear-gradient(180deg,#071029 0%, #071827 60%); color:#e6eef8; min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px}
    .app{width:100%; max-width:720px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:16px; padding:20px; box-shadow: 0 6px 24px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03)}
    header{display:flex; align-items:center; gap:12px}
    .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#7dd3fc); display:flex;align-items:center;justify-content:center;color:#022; font-weight:700}
    h1{font-size:20px;margin:0}
    p.lead{margin:4px 0 18px;color:var(--muted); font-size:13px}

    .controls{display:flex;gap:8px;flex-wrap:wrap}
    input[type=text]{flex:1; min-width:160px; padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04); background:var(--glass); color:inherit; outline:none}
    button{padding:10px 14px;border-radius:10px;border:0;background:var(--accent); color:#022; font-weight:600; cursor:pointer}
    button:active{transform:translateY(1px)}

    .meta{display:flex; gap:12px; margin-top:18px; align-items:center}
    .result{display:grid; grid-template-columns: 1fr auto; gap:8px; align-items:center}
    .temp{font-size:56px; font-weight:700; line-height:1}
    .small{font-size:14px;color:var(--muted)}

    .card-footer{margin-top:16px; display:flex; gap:8px; flex-wrap:wrap}
    .badge{padding:8px 10px; border-radius:999px; background:rgba(255,255,255,0.02); font-size:13px; color:var(--muted)}

    .center{display:flex; align-items:center; gap:12px}
    .icon{width:92px;height:92px; background:transparent; display:flex;align-items:center;justify-content:center}

    .notice{margin-top:12px;color:#ffd1d1;background:rgba(255,210,210,0.03);padding:8px;border-radius:8px;border:1px solid rgba(255,210,210,0.04);font-size:13px}

    footer{margin-top:14px;color:var(--muted); font-size:13px}

    @media (max-width:520px){ .temp{font-size:44px} .icon{width:72px;height:72px} }
  </style>
</head>
<body>
  <main class="app">
    <section class="card">
      <header>
        <div class="logo">W</div>
        <div>
          <h1>Simple Weather App</h1>
          <p class="lead">Enter a location (city, town, postcode or lat,long). Powered by WeatherAPI.</p>
        </div>
      </header>

      <div style="margin-top:14px" class="controls">
        <input id="locationInput" type="text" placeholder="e.g. London or 40.71,-74.01" aria-label="location" />
        <button id="fetchBtn">Get Weather</button>
        <button id="currentBtn" title="Use your browser location">Use my location</button>
      </div>

      <div id="outputArea" class="meta" aria-live="polite">
        <!-- Results populated by JS -->
      </div>

      <div id="notice" class="notice" style="display:none"></div>

      <div class="card-footer">
        <div class="badge">Temperature shown in Celsius by default</div>
        <div class="badge">Data: current conditions</div>
      </div>

      <footer>
        Tip: leave the input blank to fetch London (example). Replace <code>apiKey</code> in the script with your own key if needed.
      </footer>
    </section>
  </main>

  <script>
    // ---- CONFIG ----
    // You gave an example API URL. Put your API key below (or keep the provided key).
    const apiKey = 'd994ac930b58493495e43019250412'; // <- replace if you want
    const baseUrl = 'https://api.weatherapi.com/v1/current.json';

    // ---- DOM ----
    const locInput = document.getElementById('locationInput');
    const fetchBtn = document.getElementById('fetchBtn');
    const currentBtn = document.getElementById('currentBtn');
    const outputArea = document.getElementById('outputArea');
    const notice = document.getElementById('notice');

    function showNotice(text, show=true){
      if(!show){ notice.style.display='none'; return }
      notice.textContent = text; notice.style.display = 'block';
    }

    function clearOutput(){ outputArea.innerHTML = '' }

    function renderWeather(data){
      clearOutput();
      if(!data || !data.location || !data.current) return;
      const loc = data.location;
      const cur = data.current;

      const wrapper = document.createElement('div');
      wrapper.className = 'result';

      const left = document.createElement('div');
      left.innerHTML = `
        <div style="display:flex;flex-direction:column">
          <div style="display:flex;align-items:center;gap:8px">
            <div style="font-weight:600">${loc.name}${loc.region ? ', ' + loc.region : ''} • ${loc.country}</div>
          </div>
          <div style="margin-top:6px" class="small">Local time: ${loc.localtime}</div>
        </div>
      `;

      const right = document.createElement('div');
      right.style.textAlign='right';
      right.innerHTML = `
        <div class="temp">${Math.round(cur.temp_c)}°C</div>
        <div class="small">Feels like ${Math.round(cur.feelslike_c)}°C • ${cur.condition.text}</div>
      `;

      const iconWrap = document.createElement('div');
      iconWrap.className = 'icon';
      const iconImg = document.createElement('img');
      iconImg.alt = cur.condition.text;
      iconImg.src = 'https:' + cur.condition.icon; // WeatherAPI returns //cdn...
      iconImg.width = 64; iconImg.height = 64; iconWrap.appendChild(iconImg);

      // build layout: left (text) | icon+right
      const leftCol = document.createElement('div');
      leftCol.style.display='flex'; leftCol.style.alignItems='center'; leftCol.style.gap='12px';
      leftCol.appendChild(iconWrap);
      leftCol.appendChild(left);

      wrapper.appendChild(leftCol);
      wrapper.appendChild(right);

      outputArea.appendChild(wrapper);

      // extra badges
      const extra = document.createElement('div');
      extra.style.display='flex'; extra.style.gap='8px'; extra.style.marginTop='10px';
      extra.innerHTML = `
        <div class="badge">Humidity: ${cur.humidity}%</div>
        <div class="badge">Wind: ${cur.wind_kph} kph</div>
        <div class="badge">UV: ${cur.uv}</div>
      `;
      outputArea.appendChild(extra);

      showNotice('', false);
    }

    async function fetchWeather(query){
      showNotice('Loading...');
      clearOutput();
      try{
        const url = `${baseUrl}?key=${encodeURIComponent(apiKey)}&q=${encodeURIComponent(query)}&aqi=yes`;
        const resp = await fetch(url);
        if(!resp.ok){
          const text = await resp.text();
          throw new Error('Network response not ok: ' + resp.status + ' - ' + text);
        }
        const data = await resp.json();
        if(data && data.error){ throw new Error(data.error.message || 'API error') }
        renderWeather(data);
      }catch(err){
        showNotice('Error: ' + (err.message || err));
        console.error(err);
      }
    }

    // ---- events ----
    fetchBtn.addEventListener('click', ()=>{
      const q = locInput.value.trim() || 'London';
      fetchWeather(q);
    });

    locInput.addEventListener('keyup', (e)=>{ if(e.key === 'Enter') fetchBtn.click(); });

    currentBtn.addEventListener('click', ()=>{
      if(!navigator.geolocation){ showNotice('Geolocation not supported by this browser.'); return }
      showNotice('Getting your location...');
      navigator.geolocation.getCurrentPosition(pos=>{
        const lat = pos.coords.latitude.toFixed(6);
        const lon = pos.coords.longitude.toFixed(6);
        locInput.value = `${lat},${lon}`;
        fetchWeather(`${lat},${lon}`);
      }, err=>{
        showNotice('Unable to get location: ' + err.message);
      }, {timeout:10000});
    });

    // optional: fetch a default immediately
    // fetchWeather('London');
  </script>
</body>
</html>
